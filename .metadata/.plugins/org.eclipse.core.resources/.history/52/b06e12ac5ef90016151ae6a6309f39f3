package cn.edu.ccut.service.impl;

import java.util.List;
import java.util.Set;

import org.hibernate.Session;
import org.hibernate.SessionFactory;

import cn.edu.ccut.factory.DAOFactory;
import cn.edu.ccut.service.IStudentService;
import cn.edu.ccut.util.HibernateUtil;
import cn.edu.ccut.vo.Student;

public class StudentServiceImpl implements IStudentService {
	
	public StudentServiceImpl() {
	}

	@Override
	public boolean insert(Student vo) throws Exception {
		return DAOFactory.getStudentDAO().doCreate(vo);
	}

	@Override
	public List<Student> listAll() throws Exception {
		return DAOFactory.getStudentDAO().doListAll();
	}

	@Override
	public boolean login(String username, String password) throws Exception {
		try {
			return DAOFactory.getStudentDAO(this.session).doLogin(username, password);
		} catch (Exception e) {
			throw e;
		} finally {
			this.session.close();
		}
	}

	@Override
	public List<Student> listAll(int currentPage, int lineSize) throws Exception {
		try {
			return DAOFactory.getStudentDAO(this.session).doListAll(currentPage, lineSize);
		} catch (Exception e) {
			throw e;
		} finally {
			this.session.close();
		}
	}

	@Override
	public boolean delete(int id) throws Exception {
		try {
			return DAOFactory.getStudentDAO(this.session).doRemove(id);
		} catch (Exception e) {
			throw e;
		} finally {
			this.session.close();
		}
	}

	@Override
	public boolean update(Student vo) throws Exception {
		try {
			return DAOFactory.getStudentDAO(this.session).doUpdate(vo);
		} catch (Exception e) {
			throw e;
		} finally {
			this.session.close();
		}
	}

	@Override
	public boolean bantchDelete(Set<Integer> all) throws Exception {
		try {
			return DAOFactory.getStudentDAO(this.session).doBantchRemove(all);
		} catch (Exception e) {
			throw e;
		} finally {
			this.session.close();
		}
	}
}
